# yaml-language-server: $schema=https://raw.githubusercontent.com/apache/camel/main/dsl/camel-yaml-dsl/camel-yaml-dsl/src/generated/resources/schema/camelYamlDsl.json

- rest:
    path: /api
    get:
      - path: /ready
        id: get.readiness-probe
        to: direct:readiness-probe
      - path: /alive
        id: get.alive-probe
        to: direct:aliveness-probe
    post:
      - path: /webhook
        id: post.efecteWebhookController
        to: direct:efecteWebhookController

- route:
    id: aliveness-probe.route
    from:
      uri: direct:aliveness-probe
      steps:
        - setHeader:
            name: CamelHttpResponseCode
            constant: "200"
        - setBody:
            simple: "{{app.name}}: Alive"

- route:
    id: readiness-probe.route
    from:
      uri: direct:readiness-probe
      steps:
        - setHeader:
            name: CamelHttpResponseCode
            constant: "200"
        - setBody:
            simple: "{{app.name}}: Ready"
